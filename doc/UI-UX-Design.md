# Mini IPTV Player - UI/UX 设计文档

## 1. 设计原则

### 1.1 极简主义

- 去除一切不必要的视觉元素
- 内容优先，减少装饰性设计
- 用留白创造呼吸感

### 1.2 高效操作

- 减少操作步骤，常用功能触手可及
- 清晰的视觉层次引导用户视线
- 即时反馈，让用户了解系统状态

### 1.3 一致性

- 统一的交互模式
- 一致的视觉语言
- 可预期的系统行为

## 2. 视觉规范

### 2.1 色彩系统

**暗色模式（主要）**

| 用途 | 色值 | 说明 |
|------|------|------|
| 背景色 - 一级 | `#0a0a0a` | 最深层背景 |
| 背景色 - 二级 | `#1a1a1a` | 卡片/列表背景 |
| 背景色 - 三级 | `#2a2a2a` | 输入框/按钮背景 |
| 文字色 - 主要 | `#ffffff` | 标题、重要文字 |
| 文字色 - 次要 | `#a0a0a0` | 描述、辅助文字 |
| 文字色 - 禁用 | `#505050` | 不可用状态 |
| 分割线 | `#2a2a2a` | 列表分割线 |

**浅色模式**

| 用途 | 色值 | 说明 |
|------|------|------|
| 背景色 - 一级 | `#ffffff` | 最浅层背景 |
| 背景色 - 二级 | `#f5f5f5` | 卡片/列表背景 |
| 背景色 - 三级 | `#e5e5e5` | 输入框/按钮背景 |
| 文字色 - 主要 | `#000000` | 标题、重要文字 |
| 文字色 - 次要 | `#666666` | 描述、辅助文字 |
| 文字色 - 禁用 | `#b0b0b0` | 不可用状态 |
| 分割线 | `#e5e5e5` | 列表分割线 |

**功能色**

| 用途 | 色值 |
|------|------|
| 状态 - 可用 | `#22c55e` (绿色) |
| 状态 - 不可用 | `#ef4444` (红色) |
| 状态 - 未检测 | `#6b7280` (灰色) |

> 注意：不使用强调色（Accent Color），通过字重、字号区分层次。

### 2.2 字体排版

**字体家族**
- iOS: SF Pro (系统默认)
- Android: Roboto (系统默认)

**字体规格**

| 类型 | 字号 | 字重 | 行高 |
|------|------|------|------|
| 大标题 | 28px | Bold (700) | 34px |
| 标题 | 20px | Semibold (600) | 28px |
| 正文 | 16px | Regular (400) | 24px |
| 辅助文字 | 14px | Regular (400) | 20px |
| 小字 | 12px | Regular (400) | 16px |

### 2.3 间距与布局

**间距系统（基于 4px）**

| 名称 | 值 | 用途 |
|------|-----|------|
| xs | 4px | 紧凑元素间距 |
| sm | 8px | 相关元素间距 |
| md | 16px | 卡片内边距 |
| lg | 24px | 区块间距 |
| xl | 32px | 大区块间距 |

**安全区域**
- 遵循 iOS Safe Area
- Android 状态栏/导航栏适配

**圆角**

| 元素 | 圆角 |
|------|------|
| 卡片 | 12px |
| 按钮 | 8px |
| 输入框 | 8px |
| 小元素（状态点、Tag） | 4px 或全圆 |

### 2.4 图标与占位图

**图标**
- 使用线性图标风格
- 与文字色保持一致

**图标尺寸规范**

| 场景 | 尺寸 | 说明 |
|------|------|------|
| 工具栏/导航 | 24x24px | 标准图标尺寸 |
| 空状态 | 48x48px | 居中展示 |
| Logo 占位 (列表) | 24x24px | 在 48x48 容器内 |
| Logo 占位 (网格) | 32x32px | 在 64x64 容器内 |

**频道 Logo 占位**
- 尺寸：48x48px
- 缺失时显示通用电视图标
- 背景色使用三级背景色

## 3. 导航结构

### 3.1 底部 Tab 导航

```
┌─────────────────────────────────────────┐
│                                         │
│              页面内容区域                 │
│                                         │
├─────────┬─────────┬─────────┬───────────┤
│  首页   │  收藏   │  历史   │   设置    │
│   🏠    │   ⭐    │   🕐    │    ⚙️     │
└─────────┴─────────┴─────────┴───────────┘
```

| Tab | 图标 | 说明 |
|-----|------|------|
| 首页 | Home | 频道列表（默认页） |
| 收藏 | Star | 收藏的频道 |
| 历史 | Clock | 播放历史 |
| 设置 | Settings | 应用设置 |

### 3.2 导航层级

```
首页 (Tab)
  └── 播放器页面 (Push)

收藏 (Tab)
  └── 播放器页面 (Push)

历史 (Tab)
  └── 播放器页面 (Push)

设置 (Tab)
  ├── IPTV 源管理 (Push)
  │     ├── 添加源 (Push)
  │     └── 编辑源 (Push)
  ├── EPG 设置 (Push)
  ├── 语言设置 (Push)
  └── 主题设置 (Push)
```

## 4. 页面设计

### 4.1 首页（频道列表）

**布局结构**

```
┌─────────────────────────────────────────┐
│ ┌─────────────────────────────────────┐ │
│ │          🔍 搜索频道...              │ │
│ └─────────────────────────────────────┘ │
│ ┌─────────────────────────────────────┐ │
│ │ 排序: 名称 ▼    布局: ≡ / ⊞        │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ ▼ 央视频道                        (12) │
├─────────────────────────────────────────┤
│ ┌──────┐                               │
│ │ LOGO │  CCTV-1 综合           🟢 ⭐  │
│ └──────┘                               │
├─────────────────────────────────────────┤
│ ┌──────┐                               │
│ │ LOGO │  CCTV-2 财经           🟢     │
│ └──────┘                               │
├─────────────────────────────────────────┤
│ ▶ 卫视频道                        (34) │
├─────────────────────────────────────────┤
│ ▶ 地方频道                        (56) │
└─────────────────────────────────────────┘
```

**列表项设计**

```
┌─────────────────────────────────────────┐
│ ┌──────┐                               │
│ │      │  频道名称               🟢 ⭐  │
│ │ LOGO │  当前节目（若有 EPG）          │
│ │      │                               │
│ └──────┘                               │
└─────────────────────────────────────────┘
```

- Logo：48x48px，左对齐
- 频道名：主文字色，16px
- EPG 信息：次要文字色，14px
- 状态点：右侧，8px 圆点
- 收藏图标：仅已收藏时显示

**卡片网格布局**

```
┌──────────┐ ┌──────────┐ ┌──────────┐
│   LOGO   │ │   LOGO   │ │   LOGO   │
│  CCTV-1  │ │  CCTV-2  │ │  CCTV-3  │
│    🟢    │ │    🟢    │ │    🔴    │
└──────────┘ └──────────┘ └──────────┘
```

### 4.2 播放器页面

**布局结构**

```
┌─────────────────────────────────────────┐
│ ← 返回              CCTV-1 综合         │
├─────────────────────────────────────────┤
│                                         │
│                                         │
│              16:9 播放器区域             │
│                                         │
│                                         │
├─────────────────────────────────────────┤
│  ⏮ ▶️ ⏭        🔊 ──●──── ⛶          │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ 当前: 新闻联播                       │ │
│ │ 下一个: 天气预报 (19:30)             │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│            频道列表（可滚动）            │
│ ┌──────┐                               │
│ │ LOGO │  CCTV-1 综合  ← 当前    🟢 ⭐  │
│ └──────┘                               │
│ ┌──────┐                               │
│ │ LOGO │  CCTV-2 财经           🟢     │
│ └──────┘                               │
└─────────────────────────────────────────┘
```

**控件栏**

| 控件 | 说明 |
|------|------|
| 上一个 | 切换到上一个频道 |
| 播放/暂停 | 切换播放状态 |
| 下一个 | 切换到下一个频道 |
| 音量图标 | 点击静音/取消静音 |
| 音量滑块 | 拖动调节音量 |
| 全屏 | 横屏全屏播放 |

**全屏模式**

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                                                             │
│                     全屏视频内容                              │
│                                                             │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  CCTV-1 综合    ▶️ ────●──── 🔊 ⛶ 📺         ← 退出全屏   │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 收藏页面

**布局结构**

与首页频道列表一致，仅展示已收藏的频道。

**空状态**

```
┌─────────────────────────────────────────┐
│                                         │
│                                         │
│                  ⭐                      │
│                                         │
│              暂无收藏频道                 │
│         在频道列表中点击 ⭐ 收藏          │
│                                         │
│                                         │
└─────────────────────────────────────────┘
```

### 4.4 历史页面

**布局结构**

与首页频道列表类似，按时间倒序展示。

**列表项增加时间信息**

```
┌─────────────────────────────────────────┐
│ ┌──────┐                               │
│ │ LOGO │  CCTV-1 综合           🟢 ⭐  │
│ └──────┘  今天 18:30                   │
└─────────────────────────────────────────┘
```

**空状态**

```
┌─────────────────────────────────────────┐
│                                         │
│                                         │
│                  🕐                      │
│                                         │
│             暂无播放记录                  │
│          观看频道后将在此显示             │
│                                         │
│                                         │
└─────────────────────────────────────────┘
```

### 4.5 设置页面

**布局结构（类 iOS 设置）**

```
┌─────────────────────────────────────────┐
│                 设置                     │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ IPTV 源管理                      >  │ │
│ ├─────────────────────────────────────┤ │
│ │ EPG 节目单                       >  │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 外观                          自动  │ │
│ ├─────────────────────────────────────┤ │
│ │ 语言                          中文  │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 关于                             >  │ │
│ └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

**IPTV 源管理页**

```
┌─────────────────────────────────────────┐
│ ← 返回         IPTV 源管理        + 添加 │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 中国频道（默认）              ✓ 启用 │ │
│ │ iptv-org.github.io/...              │ │
│ │                        编辑 | 删除  │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 我的源                        ✓ 启用 │ │
│ │ example.com/my.m3u                  │ │
│ │                        编辑 | 删除  │ │
│ └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

**添加/编辑源页面**

```
┌─────────────────────────────────────────┐
│ ← 取消          添加源            保存  │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 源名称                              │ │
│ ├─────────────────────────────────────┤ │
│ │ 我的 IPTV 源                        │ │
│ └─────────────────────────────────────┘ │
│   给这个源取一个便于识别的名称           │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ M3U 地址                            │ │
│ ├─────────────────────────────────────┤ │
│ │ https://example.com/playlist.m3u   │ │
│ └─────────────────────────────────────┘ │
│   输入 M3U/M3U8 播放列表的 URL          │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 启用此源                        [●] │ │
│ └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

**表单字段**

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 源名称 | 文本输入 | 是 | 便于识别的名称 |
| M3U 地址 | URL 输入 | 是 | 支持 http/https |
| 启用 | 开关 | - | 默认开启 |

**交互说明**
- 左上角「取消」返回上一页，不保存
- 右上角「保存」验证表单后保存并返回
- 编辑模式时标题显示「编辑源」
- URL 输入时自动检测格式有效性

**删除确认对话框**

```
┌─────────────────────────────────────────┐
│                                         │
│              删除「我的源」？             │
│                                         │
│      删除后将无法恢复，确定要删除吗？      │
│                                         │
│    ┌─────────────┐  ┌─────────────┐    │
│    │    取消     │  │    删除     │    │
│    └─────────────┘  └─────────────┘    │
│                                         │
└─────────────────────────────────────────┘
```

- 「取消」关闭对话框，不执行删除
- 「删除」按钮使用警示色（红色文字）
- 对话框标题包含源名称，避免误删

## 5. 组件规范

### 5.1 按钮

**主要按钮**

```
┌─────────────────────┐
│       确定          │  背景: 三级背景色
└─────────────────────┘  文字: 主文字色
```

**次要按钮**

```
┌─────────────────────┐
│       取消          │  背景: 透明
└─────────────────────┘  文字: 次要文字色
```

**交互反馈**

| 状态 | 样式 |
|------|------|
| 默认 | 正常显示 |
| 按下 (active) | opacity: 70% 或 scale: 98% |
| 禁用 | opacity: 50% |

### 5.2 输入框

```
┌─────────────────────────────────────────┐
│ 🔍 搜索频道...                          │
└─────────────────────────────────────────┘
背景: 三级背景色
占位符: 次要文字色
文字: 主文字色
```

### 5.3 开关

```
常规:   ○──────●  (关)    ●──────○  (开)
```

### 5.4 Toast 提示

```
┌───────────────────────┐
│     播放失败          │  居中显示
└───────────────────────┘  2 秒后自动消失
```

### 5.5 加载指示器

```
        ◠
      ◜   ◝         旋转动画
        ◡           颜色: 次要文字色
```

### 5.6 确认对话框 (Dialog)

```
┌─────────────────────────────────────────┐
│                                         │
│                 标题                     │
│                                         │
│              描述文字内容                 │
│                                         │
│    ┌─────────────┐  ┌─────────────┐    │
│    │   次要操作   │  │   主要操作   │    │
│    └─────────────┘  └─────────────┘    │
│                                         │
└─────────────────────────────────────────┘
```

| 元素 | 样式 |
|------|------|
| 背景遮罩 | 黑色 50% 透明度 |
| 对话框背景 | 二级背景色 |
| 圆角 | 16px |
| 标题 | 18px，主文字色，居中 |
| 描述 | 14px，次要文字色，居中 |
| 次要按钮 | 透明背景，次要文字色 |
| 主要按钮 | 三级背景色，主文字色 |
| 危险操作按钮 | 透明背景，红色文字 |

## 6. 页面状态设计

每个页面都需要考虑以下 5 种状态的设计，确保用户在任何情况下都能获得清晰的反馈。

### 6.1 五种页面状态

| 状态 | 说明 | 触发条件 |
|------|------|----------|
| 理想状态 (Ideal) | 正常展示数据 | 数据加载成功且有内容 |
| 空状态 (Empty) | 无数据可展示 | 数据加载成功但为空 |
| 加载状态 (Loading) | 正在获取数据 | 首次加载或刷新中 |
| 错误状态 (Error) | 加载失败 | 网络错误、解析失败等 |
| 部分状态 (Partial) | 部分数据可用 | 部分加载成功或离线缓存 |

### 6.2 各页面状态设计

#### 首页（频道列表）

**理想状态**
```
┌─────────────────────────────────────────┐
│ 🔍 搜索频道...                          │
├─────────────────────────────────────────┤
│ ▼ 央视频道                        (12) │
│   CCTV-1 综合                      🟢  │
│   CCTV-2 财经                      🟢  │
│ ▼ 卫视频道                        (34) │
│   ...                                  │
└─────────────────────────────────────────┘
```

**空状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  📺                      │
│                                         │
│              暂无频道                    │
│       请在设置中添加 IPTV 源             │
│                                         │
│        ┌─────────────────┐              │
│        │   前往设置       │              │
│        └─────────────────┘              │
│                                         │
└─────────────────────────────────────────┘
```

**加载状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                                         │
│               ◠                         │
│             ◜   ◝                       │
│               ◡                         │
│                                         │
│           正在加载频道...                │
│                                         │
│                                         │
└─────────────────────────────────────────┘
```

**错误状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  ⚠️                      │
│                                         │
│            加载失败                      │
│       无法获取频道列表                   │
│                                         │
│        ┌─────────────────┐              │
│        │     重试        │              │
│        └─────────────────┘              │
│                                         │
└─────────────────────────────────────────┘
```

**部分状态**
```
┌─────────────────────────────────────────┐
│ ⚡ 离线模式 - 显示缓存数据               │
├─────────────────────────────────────────┤
│ ▼ 央视频道                        (12) │
│   CCTV-1 综合                      ⚫  │
│   CCTV-2 财经                      ⚫  │
└─────────────────────────────────────────┘
说明：顶部显示离线提示条，状态点显示为灰色（未检测）
```

#### 播放器页面

**理想状态**
- 视频正常播放
- 控件栏正常显示

**加载状态**
```
┌─────────────────────────────────────────┐
│                                         │
│               ◠                         │
│             ◜   ◝    视频加载中...       │
│               ◡                         │
│                                         │
├─────────────────────────────────────────┤
│  ▶️  ──────────────── 🔊 ⛶ 📺          │
└─────────────────────────────────────────┘
```

**错误状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  ⚠️                      │
│                                         │
│             播放失败                     │
│        请尝试其他频道                    │
│                                         │
├─────────────────────────────────────────┤
│  频道列表（可选择其他频道）              │
└─────────────────────────────────────────┘
```

#### 收藏页面

**空状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  ⭐                      │
│                                         │
│             暂无收藏频道                 │
│       在频道列表中点击 ⭐ 收藏           │
│                                         │
└─────────────────────────────────────────┘
```

#### 历史页面

**空状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  🕐                      │
│                                         │
│            暂无播放记录                  │
│         观看频道后将在此显示             │
│                                         │
└─────────────────────────────────────────┘
```

#### 设置 - IPTV 源管理

**空状态**
```
┌─────────────────────────────────────────┐
│                                         │
│                  📡                      │
│                                         │
│             暂无 IPTV 源                 │
│          点击右上角添加源                │
│                                         │
└─────────────────────────────────────────┘
```

### 6.3 状态设计规范

#### 空状态设计要素

| 要素 | 规范 |
|------|------|
| 图标 | 48x48px，次要文字色，居中 |
| 主标题 | 16px，主文字色，居中 |
| 副标题 | 14px，次要文字色，居中 |
| 操作按钮 | 可选，居中，主要按钮样式 |
| 整体位置 | 垂直居中偏上（约 40% 位置） |

#### 加载状态设计要素

| 要素 | 规范 |
|------|------|
| 加载指示器 | 32x32px，居中，旋转动画 |
| 加载文字 | 14px，次要文字色，可选 |
| 骨架屏 | 列表页可用骨架屏代替纯 loading |

#### 错误状态设计要素

| 要素 | 规范 |
|------|------|
| 图标 | 48x48px，警告图标 |
| 错误标题 | 16px，主文字色 |
| 错误描述 | 14px，次要文字色，简短说明原因 |
| 重试按钮 | 必须提供，主要按钮样式 |

#### 部分状态设计要素

| 要素 | 规范 |
|------|------|
| 提示条 | 页面顶部，背景色使用三级背景色 |
| 提示图标 | 闪电或云朵图标，表示离线/部分 |
| 提示文字 | 14px，简短说明当前状态 |

### 6.4 状态转换

```
                    ┌─────────┐
                    │  初始   │
                    └────┬────┘
                         │
                         ▼
                    ┌─────────┐
          ┌─────────│  加载中  │─────────┐
          │         └────┬────┘         │
          │              │              │
          ▼              ▼              ▼
     ┌─────────┐   ┌─────────┐   ┌─────────┐
     │  错误   │   │  理想   │   │   空    │
     └────┬────┘   └────┬────┘   └─────────┘
          │              │
          │              ▼
          │         ┌─────────┐
          └────────▶│  部分   │ (离线时)
                    └─────────┘
```

## 7. 动效规范

### 7.1 原则

- 微妙自然，不分散注意力
- 提供操作反馈
- 增强空间感知

### 7.2 动效参数

| 类型 | 时长 | 缓动函数 |
|------|------|----------|
| 按钮点击 | 100ms | ease-out |
| 页面转场 | 300ms | ease-in-out |
| 列表项展开 | 200ms | ease-out |
| Toast 显示/隐藏 | 150ms | ease-out |
| 加载指示器 | 1000ms | linear (循环) |

### 7.3 转场动画

| 场景 | 动画 |
|------|------|
| 页面 Push | 从右滑入 |
| 页面 Pop | 向右滑出 |
| Modal 弹出 | 从底部滑入 |
| Modal 关闭 | 向底部滑出 |
| Tab 切换 | 淡入淡出 |

## 8. 响应式适配

### 8.1 屏幕尺寸支持

| 设备类型 | 布局调整 |
|----------|----------|
| 小屏手机 (< 375px) | 紧凑间距，单列列表 |
| 标准手机 (375-428px) | 标准布局 |
| 大屏手机 (> 428px) | 增加间距，可选 2 列网格 |
| 平板 | 侧边栏 + 内容区布局 |

### 8.2 横屏适配

- 播放器页面：全屏播放器
- 其他页面：保持竖屏或适当调整布局

### 8.3 无障碍支持

- 支持动态字体大小
- 图标配合文字说明
- 足够的触摸目标尺寸 (最小 44x44pt)
- 支持 VoiceOver / TalkBack

### 8.4 无障碍实现指南

#### 可交互元素属性

所有可点击元素 (Pressable/TouchableOpacity) 必须包含：

| 属性 | 说明 | 示例 |
|------|------|------|
| accessibilityLabel | 屏幕阅读器朗读文本 | "CCTV-1 综合，频道可用" |
| accessibilityRole | 元素角色 | "button", "link", "tab" |
| accessibilityState | 状态反馈 | { selected: true }, { expanded: false } |

#### 触摸目标规范

- 最小触摸目标：44x44pt（iOS）/ 48x48dp（Android）
- 相邻可点击元素间距：最小 8px
- 对于小型视觉元素（如状态点），使用透明扩展区域达到最小触摸目标

#### 状态指示

- 不能仅依赖颜色传达信息，需配合图标或文字
- 状态变化需有即时反馈（active 样式）
